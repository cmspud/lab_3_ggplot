---
title: 'Lab 3 : ggplot'
author: "Jeremy Morris"
date: "2/20/2019"
output: 
  html_document: 
    theme: cosmo
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(tidyverse)
library(here)
```


# Introduction to ggplot2

```{r read_data,message=FALSE}
mcars <- read_csv(here('_data','mtcars.csv'))
```

“ggplot()” is the generic function call

Basic format: ggplot(dataframe, aes(x = data_column_1, y = data_column_2)) + geom_some_geom()

### mtcars | weight vs. miles per gallon

```{r scatter}
ggplot(mtcars, aes(x = wt, y = mpg)) +
    geom_point()
```

* “mtcars” is the dataset that we are using
* There are different kinds of objects in R. The mtcars dataset object is a dataframe.
* “geom” is a geometric object that is used to represent data. Bars, lines, points are examples of geometric objects.
* “aes” is short for aesthetic attributes. This is where we put the visual properties of the “geoms”. Position
   on the graph is an aestetic attribute (which is why we assign the x and y values here). Other aesthetic
   attribute examples include color, shape, etc.
* In summary: Using the “ggplot” function we would like to graph a relationship within mtcars dataset. We want to put
  the “Weight” variable on the x-axis and the “MPG” variable on the y-sxis. By choosing geom_point(), it will result
  in a scatter plot.

### heightweight | height vs. age  

```{r hw,message=FALSE}
df.heightweight <- read_csv(here('_data','heightweight.csv'))
df.heightweight
```

* df.heightweight is an object of type dataframe
* the name of this object is “df.heightweight”
* it has 236 observations and 5 variables
* variables can be accessed by the convention “df.heightweight$ageYear”
* variables have different types themselves, which costrain how we can visualize them effectively

```{r hw_scatter}
ggplot(df.heightweight, aes(x = ageYear, y = heightIn)) + 
  geom_point()
```

* In summary: Our objective is similar to that in the previous example.  However, we are using a different dataset (heightweight) and are interested in the relationship between height and age.

### heightweight | height vs. age | include average height as reference 

add the average height to the plot for the reader's reference
```{r hw_scatter2}
ggplot(df.heightweight, aes(x = ageYear, y = heightIn)) +
  geom_point() +
  geom_hline(yintercept=mean(df.heightweight$heightIn)) # note this new component to the ggplot call
```

### heightweight | height vs. age by gender
```{r hw3}
ggplot(df.heightweight, aes(x = ageYear, y = heightIn, colour = sex)) +  
  geom_point()
```

note the addition of the colour aesthetic

### heightweight | height vs. age by weight
```{r hw4}
ggplot(df.heightweight, aes(x = ageYear, y = heightIn, colour = weightLb)) +
  geom_point()
```

note how the date type (i.e. continuous) of the colour aesthetic affects the rendering

increase the size of the points by adding the size aesthetic
```{r hw5}
ggplot(df.heightweight, aes(x = ageYear, y = heightIn, colour = weightLb)) +
  geom_point(size = 5)
```

add transparency factor to points
```{r hw6}
ggplot(df.heightweight, aes(x = ageYear, y = heightIn, colour = weightLb)) +
  geom_point(size = 5, alpha = 0.5)
```

### create line graph from text - step by step
```{r txt_read,message=FALSE}
df.line.graph <- read_csv(here('_data','line.csv'))
str(df.line.graph)
head(df.line.graph)
summary(df.line.graph)
nrow(df.line.graph)
```

basic line graph
```{r txt_line}
ggplot(df.line.graph, aes(x=monthNum, y = volume, colour=type)) + 
  geom_line()
```

remove gridelines
```{r txt_remove}
ggplot(df.line.graph, aes(x=monthNum, y = volume, colour=type)) +
  geom_line() +
  theme_classic()
```

add points to follow example from text
```{r}
ggplot(df.line.graph, aes(x = monthNum, y = volume, colour = type)) +
  geom_line() +
  theme_classic() +
  geom_point(size = 4)
```

fix the x-axis
```{r}
ordered.month.list <- unique(as.character(df.line.graph$month))
df.line.graph$month <- factor(df.line.graph$month, levels=ordered.month.list)
ggplot(df.line.graph, aes(x = month, y = volume, colour = type, group = type)) +
  geom_line() +
  theme_classic()
```

label lines directly
```{r}
ggplot(df.line.graph, aes(x=month, y = volume, colour = type, group = type)) +
  geom_line() +
  theme_classic() +
  geom_text(data = df.line.graph[df.line.graph$month == "Dec", ], aes(label = type)
            , hjust=0.9, vjust=-0.5) +
  theme(legend.position=("none"))
```

change the colors of the series
```{r}
ggplot(df.line.graph, aes(x=month, y = volume, colour = type, group = type)) +
  geom_line() +
  theme_classic() +
  geom_text(data = df.line.graph[df.line.graph$month == "Dec", ], aes(label = type),
            hjust=0.9, vjust=-0.5) +
  scale_color_manual(values= c("#3182bd", "#bdbdbd")) +
  theme(legend.position=("none"))
``` 

increase the thickness of series lines
```{r}
ggplot(df.line.graph, aes(x=month, y = volume, colour = type, group = type)) +
  geom_line(size=1) +
  theme_classic() +
  geom_text(data = df.line.graph[df.line.graph$month == "Dec", ], aes(label = type)
            , hjust=0.9, vjust=-0.5) +
  scale_color_manual(values= c("#3182bd", "#bdbdbd")) +
  theme(legend.position=("none"))
```

change the color of the axis lines to grey
```{r}
ggplot(df.line.graph, aes(x=month, y = volume, colour = type, group = type)) +
  geom_line(size=1) +
  theme_classic() +
  geom_text(data = df.line.graph[df.line.graph$month == "Dec", ], aes(label = type), 
            hjust=0.9, vjust=-0.5) +
  scale_color_manual(values= c("#3182bd", "#bdbdbd")) +
  theme(legend.position=("none"),axis.line = element_line(color = "#bdbdbd"))
```

change the color of the axis ticks to grey
```{r}
ggplot(df.line.graph, aes(x=month, y = volume, colour = type, group = type)) +
  geom_line(size=1) +
  theme_classic() +
  geom_text(data = df.line.graph[df.line.graph$month == "Dec", ], aes(label = type),
            hjust=0.9, vjust=-0.5) +
  scale_color_manual(values= c("#3182bd", "#bdbdbd")) +
  theme(legend.position=("none"),
        axis.line = element_line(color = "#bdbdbd"),
        axis.ticks = element_line(color = "#bdbdbd")
  )
```

change the color of the axis labels to grey
```{r}
ggplot(df.line.graph, aes(x=month, y = volume, colour = type, group = type)) +
  geom_line(size=1) +
  theme_classic() +
  geom_text(data = df.line.graph[df.line.graph$month == "Dec", ], aes(label = type)
            , hjust=0.9, vjust=-0.5) +
  scale_color_manual(values= c("#3182bd", "#bdbdbd")) +
  theme(legend.position=("none")
        , axis.line = element_line(color = "#bdbdbd")
        , axis.ticks = element_line(color = "#bdbdbd")
        , axis.text = element_text(color = "#bdbdbd")
  )
```

change the color of the axis titles to grey
```{r}
ggplot(df.line.graph, aes(x=month, y = volume, colour = type, group = type)) +
  geom_line(size=1) +
  theme_classic() +
  geom_text(data = df.line.graph[df.line.graph$month == "Dec", ], aes(label = type)
            , hjust=0.9, vjust=-0.5) +
  scale_color_manual(values= c("#3182bd", "#bdbdbd")) +
  theme(legend.position=("none")
        , axis.line = element_line(color = "#bdbdbd")
        , axis.ticks = element_line(color = "#bdbdbd")
        , axis.text = element_text(color = "#bdbdbd")
        , axis.title = element_text(color = "#bdbdbd")
  )
```